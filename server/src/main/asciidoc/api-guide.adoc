= EUPORIAS API Guide
Predictia Intelligent Data Solutions;
:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc: left
:toclevels: 4
:sectlinks:

[[overview]]
= Overview

[[overview-http-verbs]]
== HTTP verbs

The EUPORIAS API tries to adhere as closely as possible to standard HTTP and REST conventions in its
use of HTTP verbs.

|===
| Verb | Usage

| `GET`
| Used to retrieve a resource

| `POST`
| Used to create a new resource

| `PATCH`
| Used to update an existing resource, including partial updates

| `DELETE`
| Used to delete an existing resource
|===

[[overview-http-status-codes]]
== HTTP status codes

The EUPORIAS API tries to adhere as closely as possible to standard HTTP and REST conventions in its
use of HTTP status codes.

|===
| Status code | Usage

| `200 OK`
| The request completed successfully

| `201 Created`
| A new resource has been created successfully. The resource's URI is available from the response's
`Location` header

| `204 No Content`
| An update to an existing resource has been applied successfully

| `400 Bad Request`
| The request was malformed. The response body will include an error providing further information

| `404 Not Found`
| The requested resource did not exist
|===

[[overview-errors]]
== Errors

Whenever an error response (status code >= 400) is returned, the body will contain a JSON object
that describes the problem. The error object has the following structure:

include::{snippets}/error-example/response-fields.adoc[]

For example, a request that attempts to apply a non-existent tag to a note will produce a
`400 Bad Request` response:

include::{snippets}/error-example/http-response.adoc[]

[[overview-hypermedia]]
== Hypermedia

The EUPORIAS API uses hypermedia and resources include links to other resources in their
responses. Responses are in http://stateless.co/hal_specification.html[Hypertext Application
from resource to resource.
Language (HAL)] format. Links can be found beneath the `_links` key. Users of the API should
not create URIs themselves, instead they should use the above-described links to navigate

[[overview-security]]
== Security

The EUPORIAS API is secured following the Oauth2 protocol. Unless specified otherways all requests to the API 
must provide a valid authentication token. 

=== Token acquisition

A `GET` request is used to obtain a token. You must provide your credentials in this request. Each application has
associated a read write set of credentials, and a read only set of credentials. The application also has an administrator 
account.  

==== Example request

include::{snippets}/token-get-example/curl-request.adoc[]

==== Example response

include::{snippets}/token-get-example/http-response.adoc[]

=== Token usage

Once a valid token is obtained, you must provide your token in following requests as a header parameter. 

==== Example request

include::{snippets}/token-use-example/curl-request.adoc[]

==== Example response

include::{snippets}/token-use-example/http-response.adoc[]

[[resources]]
= Resources

[[resources-index]]
== Index

The index provides the entry point into the service.



[[resources-index-access]]
=== Accessing the index

A `GET` request is used to access the index

include::{snippets}/index-example/curl-request.adoc[]

==== Response structure

include::{snippets}/index-example/response-fields.adoc[]

==== Example response

include::{snippets}/index-example/http-response.adoc[]



[[resources-index-links]]
==== Links

include::{snippets}/index-example/links.adoc[]



[[resources-applications]]
== Applications

The Applications resources is used to create and manage applications and its associated products and parameters.


[[resources-applications-list]]
=== Listing applications

A `GET` request will list all of the service's notes.

==== Response structure

include::{snippets}/applications-list-example/response-fields.adoc[]

==== Example request

include::{snippets}/applications-list-example/curl-request.adoc[]

==== Example response

include::{snippets}/applications-list-example/http-response.adoc[]


[[resources-applications-create]]
=== Creating an application

A `POST` request is used to create an application

==== Request structure

include::{snippets}/applications-create-example/request-fields.adoc[]

==== Example request

include::{snippets}/applications-create-example/curl-request.adoc[]

==== Example response

include::{snippets}/applications-create-example/http-response.adoc[]

[[resources-applications-get]]
=== Details of an application

A `GET` request will list all of the application's details.

==== Response structure

include::{snippets}/applications-get-example/response-fields.adoc[]

==== Example request

include::{snippets}/applications-get-example/curl-request.adoc[]

==== Example response

include::{snippets}/applications-get-example/http-response.adoc[]


[[resources-applications-update]]
=== Updating an application

A `PUT` request is used to update an application. For example, we can modify an application's parameters for a certain product: 

==== Request structure

include::{snippets}/applications-update-example/request-fields.adoc[]

==== Example request

include::{snippets}/applications-update-example/curl-request.adoc[]

==== Example response

include::{snippets}/applications-update-example/http-response.adoc[]


[[resources-applications-delete]]
=== Deleting an application

A `DELETE` request is used to delete an application

==== Example request

include::{snippets}/applications-delete-example/curl-request.adoc[]

==== Example response

include::{snippets}/applications-delete-example/http-response.adoc[]




[[resources-outcomes]]
== Outcomes

The Outcomes resources is used to store and retrieve outcomes using its associated parameters.


[[resources-outcomes-create]]
=== Storing an outcome of file type

==== Creating the outcome

A `POST` request is used to create an outcome. Further requests will be necessary to store the results, as an attachment.

===== Request structure

include::{snippets}/outcomes-create-example/request-fields.adoc[]

===== Example request

include::{snippets}/outcomes-create-example/curl-request.adoc[]

===== Example response

include::{snippets}/outcomes-create-example/http-response.adoc[]

==== Attaching the file

===== Example request

include::{snippets}/outcomes-attach-example/curl-request.adoc[]

===== Example response

include::{snippets}/outcomes-attach-example/http-response.adoc[]

==== Retrieving the file

===== Example request

include::{snippets}/outcomes-attach-retrieve-example/curl-request.adoc[]

===== Example response

include::{snippets}/outcomes-attach-retrieve-example/http-response.adoc[]

==== Deleting the file

===== Example request

include::{snippets}/outcomes-attach-delete-example/curl-request.adoc[]

===== Example response

include::{snippets}/outcomes-attach-delete-example/http-response.adoc[]

=== Storing an outcome of embedded type

==== Creating the outcome

A `POST` request is used to create an outcome and store its contents. This type of outcomes show the results in the API calls directly (files will be encoded in Base64), and it's intended for texts or small files, such as small PNG graphs.   

===== Request structure

include::{snippets}/outcomes-create-embedded-example/request-fields.adoc[]

===== Example request

include::{snippets}/outcomes-create-embedded-example/curl-request.adoc[]

===== Example response

include::{snippets}/outcomes-create-embedded-example/http-response.adoc[]

=== Updating an outocome 

A `PUT` request is used to update an outcome.   

==== Request structure

include::{snippets}/outcomes-update-example/request-fields.adoc[]

==== Example request

include::{snippets}/outcomes-update-example/curl-request.adoc[]

==== Example response

include::{snippets}/outcomes-update-example/http-response.adoc[]

=== Deleting an outocome 

A `DELETE` request is used to delete an outcome.   

==== Example request

include::{snippets}/outcomes-delete-example/curl-request.adoc[]

==== Example response

include::{snippets}/outcomes-delete-example/http-response.adoc[]


=== Finding outocomes 

A `GET` request is used to retrieve outcomes.   

==== Response structure

include::{snippets}/outcomes-search-example/response-fields.adoc[]

==== Example request

include::{snippets}/outcomes-search-example/curl-request.adoc[]

==== Example response

include::{snippets}/outcomes-search-example/http-response.adoc[]

=== Finding outocomes metadata 

A `GET` request is used to explore available parameters values from the outcomes.   

==== Response structure

include::{snippets}/outcomes-search-meta-example/response-fields.adoc[]

==== Example request

include::{snippets}/outcomes-search-meta-example/curl-request.adoc[]

==== Example response

include::{snippets}/outcomes-search-meta-example/http-response.adoc[]
